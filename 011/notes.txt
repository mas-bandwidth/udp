10k clients = ~50% of c3-highcpu-176 server, ~50% c3-highcpu-44 backend.

10k clients -> 10*1000*100 packets per-second = 1M pps

10k clients -> 10*1000*100*100 bytes per-second = 10,000,000 -> 10M bytes per-sec, 80M bits per-sec, 80mbps. This is very low.

n1-standard-16 can send around 100k packets per-second. seems quite low, most likely it's scheduling issues with the sleeps being so tight on 10ms.

UDP packets are the bottleneck. Even the high core machine with no HTTPS, still can't reply fast enough to go above 10k clients.

netstat -anus

https://linux-tips.com/t/udp-packet-drops-and-packet-receive-error-difference/237

sudo dropwatch -l kas

https://www.baeldung.com/linux/using-ethtool

https://lwn.net/Articles/750845/

https://www.kernel.org/doc/html/v4.18/networking/af_xdp.html
